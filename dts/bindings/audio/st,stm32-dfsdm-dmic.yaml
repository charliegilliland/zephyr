# Copyright (c) 2024 Charlie Gilliland
# SPDX-License-Identifier: Apache-2.0

description: "STM32 DFSDM DMIC"

compatible: "st,stm32-dfsdm-dmic"

include: [base.yaml, pinctrl-device.yaml]

properties:
  "#address-cells":
    required: true
    const: 1

  "#size-cells":
    required: true
    const: 0

  reg:
    required: true

  clocks:
    required: true

  clock-names:
    required: true

#  resets:
#    required: true

  pinctrl-0:
      required: true

  pinctrl-names:
      required: true

child-binding:
  description: |
    STM32 DFSDM filter configuration.
  
  include: base.yaml

  compatible: "st,dfsdm-filt"

  properties:
    dmas:
      required: true

#    interrupts:
#      required: true

    st,adc-channels:
      type: int
      required: true

    # TODO: st,adc-channel-names

    st,sample-edge:
      type: string
      required: true
      enum:
        - "rising"
        - "falling"

    st,adc-channel-clk-src:
      type: string
      required: true
      # TODO: enum

    st,adc-alt-channel:
      type: int
      default: 0

    st,filter-order:
      type: int
      required: true
      # TODO: enum
  
    # TODO: there are probably more... refer to linux bindings...
    # TODO: right shift...